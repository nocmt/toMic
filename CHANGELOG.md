# 更新日志

## [1.0.0] - 2026-01-27

### 首个版本发布

ToMic 是一个基于 Web 技术的局域网虚拟麦克风工具，致力于让任何手机瞬间变身为电脑的高质量麦克风。

### 核心特性

- **零 App 安装**：无需在手机上安装任何应用，通过 Safari 或 Chrome 浏览器即可直接连接使用。
- **跨平台支持**：完美适配 **Windows 11** 与 **macOS** 系统。
- **安全传输**：自动生成局域网自签名 SSL 证书，确保浏览器麦克风权限的安全调用。
- **智能音频路由**：
  - **Windows**: 深度集成 **VB-CABLE**，利用 SoX 实现音频流的精准注入。
  - **macOS**: 原生支持 **BlackHole 2ch**，提供系统级的虚拟音频通道。
- **低延迟架构**：基于 WebSocket + Opus 编码，配合 FFmpeg 实时转码，提供流畅的通话体验。

### 系统集成

- **原生监听器**：
  - Windows: 内置 Python 编写的监听程序 (`mic_listener.exe`)，实时监控麦克风占用状态。
  - macOS: 内置 Swift 编写的高性能监听器，自动响应 CoreAudio 状态。
- **一键启动**：提供智能启动脚本，自动检测环境依赖、启动 Web 服务并加载对应的原生监听模块。
- **便携打包**：支持编译为单文件可执行程序 (`toMic.exe` / `toMic`)，无需配置开发环境即可运行。

### 修复与优化 (Pre-release)

- **Windows 兼容性**：
  - 修复了打包后在 Windows 环境下无法定位 `sox.exe` 和 `ffmpeg.exe` 依赖的问题。
  - 优化了依赖查找逻辑，同时支持开发环境（嵌套目录）和生产环境（扁平目录）。
- **进程管理**：
  - 重构了进程退出逻辑，解决了 Windows 下使用 `CTRL+C` 无法彻底关闭后台监听子进程的问题。
  - 引入 `taskkill` 机制确保服务关闭时的资源完全释放。
